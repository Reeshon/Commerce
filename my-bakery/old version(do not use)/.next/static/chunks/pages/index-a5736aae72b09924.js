(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(2140)}])},2140:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Index}});var n,i,s=r(5893),a=r(3292),u=r(6341),c=r(7462),o=r(8732),d=r(7294),l=r(682),h=r(4051),p=r(1555),m=r(8837),f=r(3680),x=r(2914),g=r(8578),_=r(7977),b=r(2086),y=(0,d.createContext)(),q=r(1259),v=r(3977),w=r(9828),j=(0,v.ZF)({apiKey:"AIzaSyAD3V3YgDjN1ANBYfAfxegOwt6D8JqhDXY",authDomain:"shop-ad98d.firebaseapp.com",projectId:"shop-ad98d",storageBucket:"shop-ad98d.firebasestorage.app",messagingSenderId:"172119085311",appId:"1:172119085311:web:dbf1f64f95a30dce3bbcca",measurementId:"G-L51VV4QYSM"}),C=(0,w.ad)(j);(0,q.v0)(j),new q.hJ;var Z=r(137),k=r(7582),A=r(6310),J=A.Ry().shape({name:A.Z_().trim().required("Product name is required"),price:A.Rx().positive("Price must be positive").required("Price is required"),description:A.Z_().trim().required("Description is required"),image:A.Z_().url("Invalid image URL").required("Image URL is required"),category:A.Z_().trim().required("Category is required"),ingredients:A.IX().of(A.Z_().trim()),allergens:A.IX().of(A.Z_().trim()),stock:A.Rx().integer().min(0,"Stock must be at least 0").required("Stock is required")}),I=A.Ry().shape({email:A.Z_().email("Invalid email").required("Email is required"),displayName:A.Z_().trim(),isAdmin:A.O7(),createdAt:A.hT().required("Creation date is required"),updatedAt:A.hT()}),S=A.Ry().shape({userId:A.Z_().required("User ID is required"),userEmail:A.Z_().email("Invalid email").required("User email is required"),items:A.IX().of(A.Ry().shape({productId:A.Z_().required("Product ID is required"),quantity:A.Rx().integer().min(1,"Quantity must be at least 1").required("Quantity is required"),price:A.Rx().positive("Price must be positive").required("Price is required"),name:A.Z_().trim().required("Product name is required")})).required("Items are required"),status:A.Z_().oneOf(["pending","processing","shipped","delivered","cancelled"]).required("Status is required"),subtotal:A.Rx().positive("Subtotal must be positive").required("Subtotal is required"),total:A.Rx().positive("Total must be positive").required("Total is required"),createdAt:A.hT().required("Creation date is required"),updatedAt:A.hT(),shippingAddress:A.Ry().shape({street:A.Z_().trim().required("Street is required"),city:A.Z_().trim().required("City is required"),state:A.Z_().trim().required("State is required"),postalCode:A.Z_().trim().required("Postal code is required"),country:A.Z_().trim().required("Country is required")})}),T=(n=(0,Z._)(function(e,t){var r,n,i;return(0,k.Jh)(this,function(s){switch(s.label){case 0:return r=(0,w.JU)(C,"products",e),[4,(0,w.QT)(r)];case 1:if(!(n=s.sent()).exists())throw Error("Product not found");if((i=n.data().stock)+t<0)throw Error("Insufficient stock");return[4,(0,w.r7)(r,{stock:i+t,updatedAt:(0,w.Bt)()})];case 2:return s.sent(),[2]}})}),function(e,t){return n.apply(this,arguments)}),B=(i=(0,Z._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,w.oe)((0,w.JU)(C,"carts",e))];case 1:return t.sent(),[2]}})}),function(e){return i.apply(this,arguments)});(0,Z._)(function(e,t){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,I.validate(t)];case 1:return r.sent(),[4,(0,w.pl)((0,w.JU)(C,"users",e),(0,c._)((0,u._)({},t),{createdAt:new Date().toISOString()}))];case 2:return r.sent(),[2]}})}),(0,Z._)(function(e){var t,r;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return t=(0,w.JU)(C,"users",e),[4,(0,w.QT)(t)];case 1:return[2,(r=n.sent()).exists()?r.data():null]}})}),(0,Z._)(function(e,t){var r,n,i,s,a,o,d,l,h,p,m,f,x,g,_;return(0,k.Jh)(this,function(b){switch(b.label){case 0:return[4,S.validate(t)];case 1:b.sent(),r=!0,n=!1,i=void 0,b.label=2;case 2:b.trys.push([2,7,8,9]),s=t.items[Symbol.iterator](),b.label=3;case 3:if(r=(a=s.next()).done)return[3,6];return o=a.value,[4,(0,w.QT)((0,w.JU)(C,"products",o.productId))];case 4:if(!(d=b.sent()).exists())throw Error("Product ".concat(o.productId," not found"));if(d.data().stock<o.quantity)throw Error("Insufficient stock for ".concat(d.data().name));b.label=5;case 5:return r=!0,[3,3];case 6:return[3,9];case 7:return l=b.sent(),n=!0,i=l,[3,9];case 8:try{r||null==s.return||s.return()}finally{if(n)throw i}return[7];case 9:return[4,(0,w.ET)((0,w.hJ)(C,"orders"),(0,c._)((0,u._)({},t),{userId:e,status:"pending",createdAt:(0,w.Bt)(),updatedAt:(0,w.Bt)()}))];case 10:h=b.sent(),p=!0,m=!1,f=void 0,b.label=11;case 11:b.trys.push([11,16,17,18]),x=t.items[Symbol.iterator](),b.label=12;case 12:if(p=(g=x.next()).done)return[3,15];return[4,T((_=g.value).productId,-_.quantity)];case 13:b.sent(),b.label=14;case 14:return p=!0,[3,12];case 15:return[3,18];case 16:return l=b.sent(),m=!0,f=l,[3,18];case 17:try{p||null==x.return||x.return()}finally{if(m)throw f}return[7];case 18:return[4,B(e)];case 19:return b.sent(),[2,h.id]}})}),(0,Z._)(function(e){var t;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return t=(0,w.IO)((0,w.hJ)(C,"orders"),(0,w.ar)("userId","==",e)),[4,(0,w.PL)(t)];case 1:return[2,r.sent().docs.map(function(e){return(0,u._)({id:e.id},e.data())})]}})}),(0,Z._)(function(e,t){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,w.r7)((0,w.JU)(C,"orders",e),{status:t,updatedAt:new Date().toISOString()})];case 1:return r.sent(),[2]}})}),(0,Z._)(function(){var e;return(0,k.Jh)(this,function(t){switch(t.label){case 0:return e=(0,w.IO)((0,w.hJ)(C,"orders"),(0,w.Xo)("createdAt","desc")),[4,(0,w.PL)(e)];case 1:return[2,t.sent().docs.map(function(e){return(0,u._)({id:e.id},e.data())})]}})}),(0,Z._)(function(e){var t,r;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return t=(0,w.JU)(C,"orders",e),[4,(0,w.QT)(t)];case 1:return[2,(r=n.sent()).exists()?(0,u._)({id:r.id},r.data()):null]}})}),(0,Z._)(function(e,t){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,w.pl)((0,w.JU)(C,"wishlists",e),{items:t,updatedAt:new Date().toISOString()})];case 1:return r.sent(),[2]}})}),(0,Z._)(function(e){var t,r;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return t=(0,w.JU)(C,"wishlists",e),[4,(0,w.QT)(t)];case 1:return[2,(r=n.sent()).exists()?r.data().items:[]]}})}),(0,Z._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,w.PL)((0,w.hJ)(C,"products"))];case 1:return[2,e.sent().docs.map(function(e){return(0,u._)({id:e.id},e.data())})]}})}),(0,Z._)(function(e,t){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,J.validate(t)];case 1:return r.sent(),[4,(0,w.r7)((0,w.JU)(C,"products",e),t)];case 2:return r.sent(),[2]}})}),(0,Z._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:return[4,J.validate(e)];case 1:return t.sent(),[4,(0,w.ET)((0,w.hJ)(C,"products"),(0,c._)((0,u._)({},e),{stock:e.stock||0,createdAt:(0,w.Bt)(),updatedAt:(0,w.Bt)()}))];case 2:return[2,t.sent()]}})}),(0,Z._)(function(e,t){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,w.r7)((0,w.JU)(C,"users",e),{isAdmin:t,updatedAt:new Date().toISOString()})];case 1:return r.sent(),[2]}})}),(0,Z._)(function(){var e,t,r,n;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,w.PL)((0,w.hJ)(C,"orders"))];case 1:return t=(e=i.sent().docs.map(function(e){return e.data()})).length,r=e.reduce(function(e,t){return e+t.total},0),n=t?r/t:0,[2,{totalOrders:t,totalRevenue:r,averageOrderValue:n,statusBreakdown:e.reduce(function(e,t){return e[t.status]=(e[t.status]||0)+1,e},{})}]}})}),(0,Z._)(function(e){var t,r;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return t=(0,w.JU)(C,"carts",e),[4,(0,w.QT)(t)];case 1:return[2,(r=n.sent()).exists()?r.data():{items:[]}]}})}),(0,Z._)(function(e,t){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,(0,w.pl)((0,w.JU)(C,"carts",e),{userId:e,items:t,updatedAt:(0,w.Bt)()})];case 1:return r.sent(),[2]}})});var N=r(782),P=(0,d.createContext)(),U={success:function(e){N.Am.success(e,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},error:function(e){N.Am.error(e,{position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})}},components_QuantitySelector=function(e){var t=e.quantity,r=e.onChange;return(0,s.jsx)(x.Z.Control,{type:"number",min:"1",max:"100",value:t,onChange:function(e){return r(e.target.value)}})},D=r(5675),O=r.n(D),components_Home=function(){var e=(0,o._)((0,d.useState)("all"),2),t=e[0],r=e[1],n=(0,o._)((0,d.useState)(!1),2),i=n[0],q=n[1],v=(0,o._)((0,d.useState)(null),2),w=v[0],j=v[1],C=[{id:1,name:"Classic Chocolate Cake",price:29.99,image:"https://placehold.co/300x200/png?text=Chocolate+Cake",description:"Rich chocolate layers with ganache",category:"cakes"},{id:2,name:"Artisan Bread",price:6.99,image:"https://placehold.co/300x200/png?text=Artisan+Bread",description:"Freshly baked sourdough",category:"bread"},{id:3,name:"Cupcake Box",price:19.99,image:"https://placehold.co/300x200/png?text=Cupcake+Box",description:"Assorted flavors, box of 6",category:"pastries"},{id:4,name:"Cookie Box",price:12.99,image:"https://placehold.co/300x200/png?text=Cookie+Box",description:"Assorted cookies, dozen",category:"cookies",ingredients:["flour","sugar","butter","eggs"],allergens:["nuts","dairy"]}],Z="all"===t?C:C.filter(function(e){return e.category===t}),k=(0,o._)((0,d.useState)({}),2),A=k[0],J=k[1],I=(0,d.useContext)(y).addToCart,S=(0,d.useContext)(P).addToWishlist,handleQuantityChange=function(e,t){var r=Math.min(Math.max(1,Number(t)),100);J((0,c._)((0,u._)({},A),(0,a._)({},e,r)))},handleShowDetails=function(e){j(e),q(!0)},handleAddToCart=function(e,t){I(e,t),U.success("Added to cart!")},handleAddToWishlist=function(e){S(e),U.success("Added to wishlist!")};return(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(h.Z,{className:"my-4",children:(0,s.jsxs)(p.Z,{children:[(0,s.jsx)("h1",{children:"Welcome to Deleen's Home Bake"}),(0,s.jsx)(b.Z,{className:"mb-3",children:["all","cakes","bread","pastries","cookies"].map(function(e){return(0,s.jsx)(f.Z,{variant:t===e?"primary":"outline-primary",onClick:function(){return r(e)},children:e.charAt(0).toUpperCase()+e.slice(1)},e)})})]})}),(0,s.jsx)(h.Z,{children:Z.map(function(e){return(0,s.jsx)(p.Z,{md:6,lg:4,className:"mb-4",children:(0,s.jsxs)(m.Z,{className:"h-100 product-card",children:[(0,s.jsx)(O(),{src:e.image,alt:e.name,width:300,height:200,style:{cursor:"pointer"},onClick:function(){return handleShowDetails(e)}}),(0,s.jsxs)(m.Z.Body,{children:[(0,s.jsx)(m.Z.Title,{children:e.name}),(0,s.jsxs)(m.Z.Text,{children:["$",e.price]}),(0,s.jsx)(m.Z.Text,{children:e.description}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)(components_QuantitySelector,{quantity:A[e.id]||1,onChange:function(t){return handleQuantityChange(e.id,t)}})}),(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)(f.Z,{variant:"primary",onClick:function(){return handleAddToCart(e,A[e.id]||1)},children:"Add to Cart"}),(0,s.jsx)(f.Z,{variant:"outline-secondary",onClick:function(){return handleAddToWishlist(e)},children:"♡ Wishlist"})]}),(0,s.jsx)(f.Z,{variant:"link",className:"p-0 mb-2",onClick:function(){return handleShowDetails(e)},children:"View Details"})]})]})},e.id)})}),(0,s.jsx)(g.Z,{size:"lg",show:i,onHide:function(){return q(!1)},children:w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z.Header,{closeButton:!0,children:(0,s.jsx)(g.Z.Title,{children:w.name})}),(0,s.jsx)(g.Z.Body,{children:(0,s.jsxs)(h.Z,{children:[(0,s.jsx)(p.Z,{md:6,children:(0,s.jsx)(O(),{src:w.image,alt:w.name,width:300,height:200,className:"img-fluid"})}),(0,s.jsxs)(p.Z,{md:6,children:[(0,s.jsxs)("h4",{children:["$",w.price]}),(0,s.jsx)("p",{children:w.description}),w.ingredients&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Ingredients:"}),(0,s.jsx)("p",{children:w.ingredients.join(", ")})]}),w.allergens&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h5",{children:"Allergens:"}),w.allergens.map(function(e){return(0,s.jsx)(_.Z,{bg:"warning",className:"me-1",children:e},e)})]}),(0,s.jsxs)(x.Z.Group,{className:"mt-3",children:[(0,s.jsx)(x.Z.Label,{children:"Quantity:"}),(0,s.jsx)(x.Z.Control,{type:"number",min:"1",max:"100",value:A[w.id]||1,onChange:function(e){return handleQuantityChange(w.id,e.target.value)}})]})]})]})}),(0,s.jsxs)(g.Z.Footer,{children:[(0,s.jsx)(f.Z,{variant:"outline-secondary",onClick:function(){return q(!1)},children:"Close"}),(0,s.jsx)(f.Z,{variant:"primary",onClick:function(){handleAddToCart(w,A[w.id]||1),q(!1)},children:"Add to Cart"})]})]})})]})};function Index(){return(0,s.jsx)(components_Home,{})}}},function(e){e.O(0,[774,16,532,680,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);